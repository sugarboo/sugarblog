---
title: 采购端小程序 - 开发文档
date: '2022-07-28 18:00:00'
sidebar: 'auto'
categories:
 - mc
tags:
 - mc
publish: true
keys:
 - 'f896badeeb682becbc1afddf85559259'
---

>[采购端小程序-供应链开发PRD文档V2.0](https://docs.qq.com/doc/DYXRQTGRyRFl2Z0F3)

## 1. 登录 / 注册
### 1.1 使用手机号登录
- 微信手机号登录
- 短信验证码登录
### 1.2 隐私政策，用户服务协议，使用条款
- 需要同意上述协议方可登录
- 上述协议页面应在H5项目中写
### 1.3 小程序内各页面的登录态校验并拦截
- 点击`首页搜索栏`，不触发登录，进行搜索操作后`点击搜索结果`，触发登录
- 点击`Banner`不触发登录
- `商品详情页`不触发登录，点击`加入购物车按钮` / `下单按钮`时触发登录
- 点击TabBar的`购物车`、`订单`、`我的`Tab时，触发登录
### 1.4 原苗仓主APP的用户信息关联

## 2. 底部导航栏
### 2.1 TabBar
- 共4个Tab：`首页`、`购物车`、`订单`、`我的`

## 3. 首页
### 3.1 页面结构
- 搜索栏
- Banner
- 商品信息流
### 3.2 搜索栏
- 点击跳转到搜索页
- 商品信息流滑动到第二屏开始，搜索栏自动吸顶
### 3.3 Banner
- 点击跳转至平台介绍页(H5)
### 3.4 商品信息流
- 同一品种商品多规格合并展示在首页，点击多规格商品，跳转至商品多规格页
- 排序规则：按库存总量由大到小排序；库存总量相同时，**按SKU的创建或更新时间排序**
- 每次加载20条商品信息，页面触底继续加载20条，最多加载50条，底部显示“- 到底了 -”提示文案
- 从滑动到第二屏开始，出现`返回顶部`图标，点击可快速返回页面顶部
### 3.5 商品多规格页
- 页面标题为当前多规格商品的品名

## 4. 搜索
### 4.1 搜索输入页
- 关键词智能联想：输入关键词，下拉列表显示相关联的苗木名称
- 支持拼音首字母搜索
- 支持别名搜索
- 列表最多显示20个搜索结果
- 列表搜索结果中对于当前输入字的高亮显示
- 点击搜索结果列表项，跳转到搜索结果商品列表页
### 4.2 搜索结果页
- 每次加载20条商品信息，页面触底继续加载20条，直到加载完毕，底部显示“- 到底了 -”提示文案
- 超过第二屏，开始展示页码“N页”
- 点击`返回顶部`图标，快速返回页面顶部
### 4.3 搜索结果列表筛选规则
- 高度最高：点击后按高度区间最大值由大到小排序
- 冠幅最大：点击后按冠幅区间最大值由大到小排序
### 4.4 缺省状态
- 搜索无结果时，显示缺省图，提示文案：“暂无搜索结果”

## 5. 商品详情页
### 5.1 页面结构
- 商品主图 / 视频区：主图显示`正视图`、`俯视图`、`一平方照`、`苗圃垄地照`；视频显*示商品视频(均为后台上传的SPU数据)*；点击底部控件，切换图片 / 视频的显示
- 价格，容器类型，植物名称，别名
- 规格参数：高度、冠幅、种植密度、产地、库存总量、发货提示文案
- 商品详情区：正视图，俯视图，刻度板照片，一平方照，容器尺寸对照表，细节展示-根，细节展示-叶，细节展示-花，细节展示-支数和栽培土，苗圃垄地图，打包示意图，苗圃起苗视频，装车示意图，价格说明
- 底部操作栏：首页，客服，购物车，加入购物车按钮，立即下单按钮
### 5.2 关于价格
- 点击商品详情页中的价格区域，Toast提示“价格为上车含税价，税点1%，支持增值税专用发票和电子普通发票”
- 价格计算公式按照取样区间计算(待定)
- 价格显示方式：展示小数点后0-2位，最多2位
- 价格刷新机制
### 5.3 关于发货
- 点击商品详情页的规格参数区的发货提示文案时，Toast提示“付款后最快24小时内发货，平台配送的运费按照车型和距离计算；如需自提请与跟单员线下联系”
### 5.4 分享
- 分享封面使用商品正视图
- 微信聊天中点击分享结果直接打开商品详情
- 如商品已下架，提示“该商品已经下架”
### 5.5 底部操作栏
- 首页图标
- 客服图标
- 购物车图标
- 加入购物车按钮：购物车内商品到达上限时，无法加购，弹窗提示，点击`管理购物车`按钮跳转至购物车tab
- 立即下单按钮
### 5.6 加购 / 下单弹出层
- 最小值100
- 增减区间单位为100
- 最大值为可用库存数量
- 可重复加购
### 提交订单检查
- 提交订单时校验可售库存数是否可满足当前采购数
- 可售库存校验通过后跳转至订单确认页
### 异常情况
- 已售罄：可用库存为0，底部操作栏上方蒙版提示，禁用加入购物车 / 立即下单按钮
- 已下架：后台管理员手动下架商品，底部操作栏上方蒙版提示，禁用加入购物车 / 立即下单按钮
- 商品删除 / 不存在：显示缺省图，提示文案“商品不存在”，点击`去看看别的`按钮，跳转到首页

## 6. 购物车
### 6.1 页面结构
- 管理按钮
- 有效购物车项列表
- 失效购物车项列表（提供一键`清空失效苗木`按钮）
- 底部操作栏
### 6.2 购物车项列表
- 上限100个
- 左滑显示删除按钮
### 6.3 列表排序规则
- 优先按加购时间倒序排序
- 同类商品放在一起
### 6.4 底部操作栏
- 全选勾选框
- 合计价格
- 提交订单按钮：未选择商品时，禁用
### 6.5 管理模式
- 多选或全选删除
### 6.6 购物车失效规则
- 失效商品展示失效蒙版，商品名置灰，展示失效原因文案：“商品已失效，不能购买”
- 点击商品图片或名称，跳转到商品详情页，反显下架状态或售罄状态
- 管理员后台手动下架SKU
- 可售库存为0
### 6.7 降价提醒
- 价格上升，购物车直接刷新价格，Toast提示“商品信息已刷新”
- 价格下降，在对应购物车项下方使用红字标识“比加入时下降xx元”
### 6.8提交订单检查
- 可售库存校验，不通过时弹窗提示“库存不足，请调整采购数量再下单”；点击`我知道了`按钮，关闭弹窗，停留在当前购物车页面
### 6.9 缺省状态
- 购物车为空时，显示缺省图，提示文案：“购物车还是空的”，点击`去逛逛`按钮，返回首页

## 7. 确认订单页
### 7.1 页面结构
- 收货地址选择
- 送达时间选择
- 订单商品列表
- 商品金额显示
- 物流运费待确认提示
- 发票抬头选择
- 备注填写
- 底部操作栏：合计金额显示、`提交订单`按钮
### 7.2 重复性校验
- 若已存在重复订单，判断订单状态
- 重复订单状态处于待审核状态与待评价状态之间，弹窗提示“您的列表中存在重复订单，请勿重复提交订单”。点击`我知道了`按钮关闭弹窗，点击`坚持下单`按钮进入确认订单页面
### 7.3 收货地址选择
- 点击跳转至收货地址列表页选择收货地址
- B端场景不设置默认收货地址
- 支持获取微信地址
- 配送范围校验：配送范围仅限于华南地区（广东省、广西省、福建省、海南省）
### 7.4 送达时间选择
- 点击弹出选择送货时间弹出层
- 选择范围为24小时后的7天内
- 弹出层选中选项后，关闭弹出层。确认订单页中反显选择的送货时间
### 7.5 订单商品列表
- 超过4个商品时，小图只显示3个商品正视图及省略号图片
- 点击弹出弹出层，显示全部商品列表。展示内容包括：正视图、商品名称、单价 / 容器，高度、冠幅、采购数量、采购金额
### 7.6 物流运费待确认提示
- 提示文案：“提交订单后系统审核方可计算运费”
### 7.7 发票抬头选择
- 点击跳转至发票抬头列表页选择发票抬头
- 支持获取微信发票抬头
### 7.8 备注填写
- 点击跳转到填写备注页
- 填写完成后反显

## 8. 收货地址列表页
### 8.1 页面结构
- 收货地址列表：列表项左滑显示删除按钮；若当前为选择收货地址操作时，配送范围外的列表项提示“以下地址超配送范围”，地址置灰，禁止选择；配送范围内的列表项左边显示勾选框，一经勾选则将当前选中地址数据保存在`storage`中，返回确认订单页反显
- 底部操作栏：`添加地址`按钮
### 8.2 排序规则
- 按照添加时间倒序排序
### 8.3 缺省状态
- 收货地址列表为空时，显示缺省图、`添加一个收货地址`按钮

## 9. 收货地址编辑页
### 9.1 页面结构
- 收货人输入框
- 联系方式输入框
- 所在地区输入框：聚焦时跳转到地图选点插件页面
- 详细地址输入框
- 获取微信收货地址按钮：点击跳转至微信原生收货地址页面
### 9.2 表单校验
- 收货人：必填，字数上限25
- 联系方式：必填，11位数字
- 所在地区：必填
- 详细地址：必填
### 9.3 配送范围校验
- 保存时校验当前填写的收货地址数据是否超出配送范围。若超出配送范围，弹窗提示“您的地址超出物流配送范围了”，点击`调整地址`按钮停留在当前收货地址编辑页，点击`仍然保存`按钮，提交保存操作

## 10. 发票抬头列表页
### 10.1 页面结构
- 发票抬头列表：列表项左滑显示删除按钮；若当前为选择发票抬头操作时，列表项左边显示勾选框，一经勾选则将当前选中发票抬头数据保存在`storage`中，返回确认订单页反显
- 底部操作栏：`添加发票抬头`按钮

## 11. 发票抬头编辑页
### 11.1 页面结构
- 发票类型选择：`电子普通发票` / `增值税专用发票`
- 获取微信发票抬头按钮：点击跳转至微信原生发票抬头页面
- 发票抬头表单区域（过于复杂，详见PRD文档）
- 底部操作栏：`确认`按钮
### 11.2 表单校验
- 校验规则过于复杂，详见PRD文档

### 12. 填写备注页
### 12.1 页面结构
- 备注文本域输入框：字数上限200
- 底部操作栏：`完成`按钮。点击时将当前填写的备注数据保存在`storage`中，返回确认订单页反显
  
## 13. 下单成功结果页
### 13.1 页面结构
- 下单成功图标
- 下单成功提示文案
- 商品件数、采购总数量、商品金额
- 按钮区域：`返回首页`按钮，`查看订单按钮`
### 13.2 一次性订阅消息
- 点击`返回首页`按钮、`查看订单按钮`时，均触发一次性消息订阅提醒

### 14. 订单支付
### 14.1 支付方式
- 微信支付
- 工银e企付
- 工商银行企业网银
### 14.2 企业网关支付流程
- 弹窗提示，标题为“复制到工商银行企业网银支付”
- 弹窗内容为具体的支付链接
- 点击`复制链接`，Toast提示“复制成功”
### 14.4 申请退款

## 15. 支付失败结果页
### 15.1 页面结构
- 支付失败图标
- 支付失败提示文案
- 按钮区域：`查看订单`按钮，`重新支付`按钮

## 16. 支付成功结果页
### 16.1 页面结构
- 支付成功图标
- 支付成功提示文案
- 按钮区域：`返回首页`按钮，`查看订单`按钮

## 17. 订单Tab
### 17.1 页面结构
- Tab栏：订单状态筛选（全部、待审核、待付款、待收货、待评价）
- 订单列表
- 加载完毕，底部提示“- 到底了 -”
### 17.2 订单列表反显字段
- 平台名称：苗仓地被直采中心
- 下单时间
- 订单状态：待审核、待付款、待收货、待评价、已完成、已取消
- 商品图：显示默认正视图+采购数量+共n件；超过4张图片使用省略号图标
- 金额：保留小数点后2位。待付款状态金额订单显示应付金额；待收货、待评价、已完成状态订单显示实付金额；已取消状态订单不显示金额
### 17.3 订单列表排序规则
- 根据下单时间倒序排序
### 17.3 订单列表加载规则
- 每次20条，触底继续加载，直至加载完毕
- 加载完毕后，底部提示“- 到底了 -”
### 17.4 订单主状态
- 待审核：主按钮`联系客服`；次按钮`取消订单`
- 待付款：主按钮`去支付`；次按钮`取消订单`
- 待收货：主按钮`确认签收`；次按钮`申请售后`
- 待评价：主按钮`评价一下`；次按钮`查看发票`
- 已完成：主按钮`再来一单`；次按钮`查看发票`
- 已取消：主按钮`重新下单`；次按钮`删除订单`
- **处理中（部分商品签收但部分退货，等待跟单员处理的中间态）**：主按钮`确认签收${已签收送货单数量}/{送货单总数量}单`
### 17.5 订单支付状态
- 待支付
- 支付处理中
- 支付失败
- 支付成功
- 支付超时
- 退款中
- 已退款
### 17.6 订单物流状态
- 待起苗打包
- 待装车
- 送货中
- 待签收
- 已签收
- 退货中
- 已退货
### 17.7 订单开票状态
- 待开票
- 申请中
- 已开票
### 17.8 缺省状态
- 缺省图标
- 缺省文案：“您还没有${对应订单状态}的订单”
- `去采购`按钮，点击返回首页

## 18. 订单详情页
### 18.1 页面结构
- 订单主状态：图标，文案
- 订单主状态流程Timeline
- 预计送达时间
- 订单商品列表
- 收货地址信息
- 订单金额信息：商品金额、物流运费
- 订单信息：下单时间、订单编号（可复制）、备注信息
- 跟单员区域：跟单员头像、名称、ID；打电话图标
- 底部操作栏：根据订单主状态显示不同的按钮
### 18.2 订单商品列表
- 弹出层，点击具体商品跳转到商品详情页
### 18.3 取消订单操作
- 弹窗Double Check，点击弹窗中的`取消订单`按钮，弹出取消订单理由填写弹出层
- 弹出层数据填写完毕，点击弹出层的`取消订单`按钮，提交取消订单操作
### 18.4 联系客服操作
- 点击按钮，调起微信原生客服聊天页面
### 18.5 申请开票操作
### 18.6 查看运费明细操作
- 弹出层，显示送货单列表、运费合计金额
### 18.7 支付操作
- 支付时间限制：4小时内，超时未支付订单将被自动取消
### 18.8 确认签收操作
- 点击`确认签收`按钮，跳转到送货单详情列表页，分别签收
- 送货单全部签收后订单状态由`待收货`状态变为`待评价`状态
- `确认签收`按钮文案显示送货单签收数量情况，如`确认签收1/2单`
### 18.8 申请售后操作
- 点击跳转到申请售后页面
### 18.9 评价一下操作
- 点击跳转到订单评价编辑页
- 若用户在订单完成后24小时内未评价，则系统自动好评
### 18.10 查看发票操作
- 点击打开发票图片大图
### 18.11 删除订单操作
- 点击`删除订单`按钮，弹窗Double Check，确认后Toast提示订单已删除，返回订单Tab
### 18.11 重新下单操作
- 点击`重新下单`按钮，自动选择当前订单的商品，自动加入下单页面

## 19. 我的
### 19.1 页面结构
- 个人信息：头像，用户名，手机号
- 顶部按钮：支付账单按钮；我的发票按钮
- Banner：合作伙伴入驻申请，点击跳转至合作伙伴页面（H5）
- 收货地址管理按钮：点击跳转到收货地址列表页
- 发票抬头管理按钮：点击跳转到发票抬头列表页
- 帮助中心按钮：点击跳转到帮助中心页（H5）
- 设置按钮：点击跳转到设置页
- 在线客服按钮：点击调起微信原生客服聊天页面

## 20. 个人资料编辑页
### 20.1 页面结构
- 头像选择
- 昵称输入框
- 底部操作栏：`确认修改`按钮

## 21. 支付账单页

## 22. 支付详情页

## 23. 我的发票页

## 24. 发票详情页

## 25. 设置页
### 25.1 页面结构
- 个人资料按钮：点击跳转到个人资料编辑页
- 条款与规则：点击跳转到用户使用条款页（H5）
- 隐私政策：点击跳转到隐私政策页（H5）
- 关于：显示版本号（V1.0.0）
- 底部操作栏：`退出登录`按钮：Double Check，清除Token

